<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
<title>SOLEX</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" th:href="@{/css/approval/approvalDrafts.css}" />
</head>
<body>
	<!-- 레이아웃을 상속받아 특정 영역에 덮어쓸 프래그먼트 설정 -->
	<th:block layout:fragment="content">
		<div class="custom-body container-xxl flex-grow-1 container-p-y">
			<h2 style="margin-bottom: 0;">기안서 목록</h2>
			<button type="button" class="btn custom-btn-blue float-end mb-4"
				data-bs-toggle="modal" data-bs-target="#exampleModal">기안서
				등록</button>

			<!-- Modal -->
			<div class="modal fade" id="exampleModal" tabindex="-1"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-scrollable modal-lg">
					<div class="modal-content">
						<div class="modal-header">
							<select id="docTypeSelect"
								class="form-select form-select-sm mb-3" aria-label="기안서 종류 선택">
								<th:block th:each="type : ${docTypes}">
									<option th:value="${type['DET_ID']}" th:text="${type['DET_NM']}"
										th:selected="${type['DET_NM'] == '반/연차신청서'}"></option>
								</th:block>
							</select>
						</div>
						<div class="modal-body">
							<div class="approval-line">
								<h2></h2> 
								<table class="approval-table ms-auto">
									<thead>
										<tr>
											<th></th>
											<th>팀장</th>
											<th>부장</th>
										</tr>
									</thead>
									<!-- 									여기에 결제권자가 들어와야 함 -->
									<tbody>
										<tr>
											<td>결재</td>
											<td>이수정<br>
											<span>결재<br>25/05/27</span></td>
											<td>배지영<br>대기</span></td>
										</tr>
									</tbody>
								</table>
							</div>
							<!-- 여기에 기안서 등록 form(JS) -->
							<form>
								<div id="dynamicFormArea"></div>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">닫기</button>
							<button type="button" class="btn custom-btn-blue">등록</button>
						</div>
					</div>
				</div>
			</div>
			<!-- 상세 모달 -->
			<div class="modal fade" id="detailModal" tabindex="-1"
				aria-labelledby="detailModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-lg">
					<div class="modal-content">
						<div class="modal-header">
							<h2 class="modal-title" id="detailModalLabel">기안서 상세</h2>
						</div>
						<div class="modal-body">
							<p>
								<strong>기안서 번호:</strong> <span id="detailDocId"></span>
							</p>
							<p>
								<strong>종류:</strong> <span id="detailDocType"></span>
							</p>
							<p>
								<strong>제목:</strong> <span id="detailDocTt"></span>
							</p>
							<p>
								<strong>결재상태:</strong> <span id="detailDocSts"></span>
							</p>
							<p>
								<strong>등록일:</strong> <span id="detailDocRegTime"></span>
							</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">닫기</button>
						</div>
					</div>
				</div>
			</div>
			<!-- 본문 영역-->
			<div class="custom-content">
				<div id="grid"></div>
			</div>
		</div>
		<th:block layout:fragment="script">
			<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
			<script th:src="@{/js/approval/approvalDrafts.js}"></script>
			<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
		</th:block>
</body>
</html>