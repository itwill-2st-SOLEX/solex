<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="kr.co.itwillbs.solex.operator.OperatorMapper">	
  	
  	<!-- 로그인한 사람에 해당하는 공정 정보 가져오기 -->
  	<select id="operatorSummary">
  	                
		SELECT pr.prc_cd,         <!-- 공정코드 -->
       		   pr.prc_nm,         <!-- 공정이름 -->
       		   cd1.det_nm || ' ' || cd2.det_nm AS dep_nm,  <!-- 부서 + 팀명 -->
       		   qi.qua_nm          <!-- 품질검사명 -->
  		FROM   process pr JOIN work_process wp    ON pr.prc_id = wp.wrk_id
  						  JOIN quality_item qi    ON pr.qua_id = qi.qua_id
  						  JOIN code_detail cd1    ON pr.det_id = cd1.det_id      
  						  JOIN code_detail cd2    ON wp.wpo_team = cd2.det_id   
  						  JOIN view_employee ve   ON ve.emp_dep_nm = cd1.det_nm
                         									AND ve.emp_team_nm = cd2.det_nm
 		WHERE ve.emp_id = #{empId}
  	</select>
  </mapper>
	