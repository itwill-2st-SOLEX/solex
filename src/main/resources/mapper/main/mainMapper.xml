<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="kr.co.itwillbs.solex.main.MainMapper">	
	
	<!-- 공지사항 목록 -->
	<select id="mainNoticeList" resultType="map">
		SELECT n.not_id, n.emp_id, n.not_tt, n.not_con, not_reg_date, e.emp_nm, ve.emp_dep_nm, ve.emp_pos_nm
		FROM NOTICE n JOIN EMPLOYEE e ON n.emp_id = e.emp_id
		   		LEFT JOIN  VIEW_EMPLOYEE ve ON e.emp_id = ve.emp_id
		ORDER BY n.not_reg_date DESC 
		FETCH FIRST 4 ROWS ONLY
	</select>
	
	<!-- 결재 대기 목록 조회 -->
	<select id="mainDocumentList" resultType="map">
		SELECT d.doc_id,
			   c.det_id AS doc_type_code,
		       c.det_nm AS doc_type,
		       s.det_nm AS doc_sts,
		       TO_CHAR(d.doc_reg_time, 'YYYY-MM-DD') AS doc_reg_time
		  FROM document d
		  LEFT JOIN code_detail c
		    ON d.doc_type = c.det_id
		  LEFT JOIN code_detail s
		    ON d.doc_sts  = s.det_id
		WHERE emp_id = #{empId}
		 ORDER BY doc_reg_time DESC
        FETCH FIRST 4 ROWS ONLY
  	</select>
	
  </mapper>
  
  
  
  
  
  